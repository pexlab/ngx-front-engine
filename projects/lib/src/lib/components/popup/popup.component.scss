@use '../../../../assets/fe-styles/theme' with ($scope: 'popup');
@use '../../../../assets/fe-styles/responsive' with ($breakpoint: 1000px);
@use '../../../../assets/fe-styles/utils';
@use 'sass:math';

:host {

    position              : absolute;

    left                  : 0;
    top                   : 0;

    width                 : 100%;
    height                : 100%;

    overflow              : hidden;

    display               : grid;
    grid-template-columns : 1fr;
    grid-template-rows    : 1fr;
    place-items           : center;

    &.hidden {

        pointer-events : none;

        & .container {

            @include responsive.desktop {
                animation : containerOutDesktop .5s ease forwards;
            }

            @include responsive.mobile {
                animation : containerOutMobile .5s ease forwards;
            }
        }
    }

    &.visible {

        & .container {

            @include responsive.desktop {
                animation : containerInDesktop .5s ease forwards;
            }

            @include responsive.mobile {
                animation : containerInMobile .5s ease forwards;
            }
        }
    }

    & > .container {

        grid-column        : 1;
        grid-row           : 1;

        display            : grid;
        grid-template-rows : auto 1fr;
        grid-gap           : 0;
        place-items        : center;

        overflow           : hidden;

        background-color   : theme.hex('background');

        opacity            : 0;
        transform          : scale(0.7);

        touch-action       : auto;
        pointer-events     : visible;

        @include responsive.desktop {

            min-width     : var(--popup-width-min);
            width         : var(--popup-width);
            max-width     : var(--popup-width-max);

            min-height    : var(--popup-height-min);;
            height        : var(--popup-height);
            max-height    : var(--popup-height-max);

            border-radius : utils.fes(1);

            border        : utils.fes(.06) solid theme.hex('outer-border');

            box-shadow    : 0 utils.fes(1) utils.fes(1.9) rgb(black, 0.5);
        }

        @include responsive.mobile {

            width                   : 100%;

            min-height              : var(--popup-height-min);;
            height                  : var(--popup-height);
            max-height              : var(--popup-height-max);

            align-self              : end;

            border-top-left-radius  : utils.fes(1.5);
            border-top-right-radius : utils.fes(1.5);

            box-shadow              : 0 utils.fes(-1) utils.fes(1.9) rgb(black, 0.3);
        }

        & > .title-bar {

            position      : relative;

            width         : 100%;

            border-bottom : utils.fes(.06) solid theme.hex('divider');

            background    : theme.hex('title-bar-background');

            & > .icon {

                cursor                      : pointer;

                width                       : utils.fes(2.5);
                height                      : utils.fes(2.5);

                position                    : absolute;
                top                         : utils.opFes('50% -', math.div(2.5, 2));
                right                       : utils.fes(.65);

                &.hidden {
                    opacity        : 0;
                    pointer-events : none;
                }

                & svg-icon {

                    display     : grid;
                    place-items : center;

                    position    : absolute;

                    left        : 50%;
                    top         : 50%;

                    width       : utils.fes(1);
                    height      : utils.fes(1);

                    color       : theme.hex('exit');

                    transform   : translateX(-50%) translateY(-50%);

                    & svg {
                        width  : utils.fes(1);
                        height : utils.fes(1);
                    }
                }

                -webkit-tap-highlight-color : transparent;

                &:focus {
                    outline : none;
                }

                &:after {

                    z-index          : -1;

                    content          : '';

                    position         : absolute;

                    left             : 0;
                    top              : 0;
                    right            : 0;
                    bottom           : 0;

                    border-radius    : utils.fes(2.5);

                    opacity          : 0;
                    background-color : theme.fadeHex('exit', .2);
                    border           : utils.fes(.06) solid theme.fadeHex('exit', .2);

                    transform        : scale(.8);

                    transition       : opacity .25s ease, transform .25s ease;
                }

                @include utils.hover {
                    &:after {
                        opacity   : 1;
                        transform : scale(1);
                    }
                }
            }

            & > span {

                display    : block;

                width      : 100%;
                height     : fit-content;

                box-sizing : border-box;

                margin     : utils.fes(1) 0;
                padding    : 0 utils.fes(2.5 + (.65 * 2));

                text-align : center;
                @include theme.commonFont('subheading');
                color      : theme.hex('text');
            }
        }

        & > .content-wrapper {

            display             : grid;
            place-items         : center;

            width               : 100%;
            height              : 100%;

            overflow-x          : hidden;

            @include theme.scrollbar(theme.hex('scrollbar'), theme.hex('scrollbar-hover'), transparent, 'y', utils.fes(.5), utils.fes(.25));

            overflow-scrolling  : touch;
            overscroll-behavior : contain;

            @include responsive.desktop {
                min-width : utils.fes(25);
            }

            & .content {

                width   : 100%;

                padding : utils.fes(1.9);

                color   : theme.hex('text');

                @include theme.commonFont('body');
            }
        }
    }
}

@keyframes containerInDesktop {

    from {
        opacity   : 0;
        transform : scale(0.7);
    }

    to {
        opacity   : 1;
        transform : scale(1);
    }
}

@keyframes containerOutDesktop {

    from {
        opacity   : 1;
        transform : scale(1);
    }

    to {
        opacity   : 0;
        transform : scale(1) translateY(utils.fes(20));
    }
}

@keyframes containerInMobile {

    from {
        opacity   : 0;
        transform : translateY(50%);
    }

    to {
        opacity   : 1;
        transform : translateY(0);
    }
}

@keyframes containerOutMobile {

    from {
        opacity   : 1;
        transform : translateY(0);
    }

    to {
        opacity   : 0;
        transform : translateY(50%);
    }
}
