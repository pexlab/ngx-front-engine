@use '../../../../assets/fe-styles/theme' with ($scope: 'comment');
@use '../../../../assets/fe-styles/utils';

:host {

    /* General rules */

    & * {
        user-select : none;
    }

    & .header {

        width          : fit-content;

        display        : grid;
        grid-auto-flow : column;
        grid-gap       : utils.fes(1);

        align-items    : center;

        & > .nickname {

            width          : fit-content;

            display        : grid;
            grid-auto-flow : column;
            grid-gap       : utils.fes(.65);
            align-items    : center;

            & > svg-icon {

                width  : utils.fes(1);
                height : utils.fes(1);

                color  : theme.hex('verified-badge');
            }

            & > span {

                align-self  : center;

                cursor      : pointer;

                color       : theme.hex('text');
                user-select : text;

                @include theme.commonFontFamily('decorative');
                @include theme.commonFontWeight('decorative');
                @include theme.commonFontSize('subheading');
            }
        }

        & > .divider {

            width      : utils.fes(.06);
            height     : utils.fes(.65);

            background : theme.hex('border');
        }

        & > span.date {

            cursor : pointer;

            @include theme.commonFont('alternative');
            color  : theme.hex('date');
        }
    }

    & .buttons {

        width          : fit-content;

        display        : grid;
        grid-auto-flow : column;
        grid-gap       : utils.fes(1.9);

        margin-top     : utils.fes(.31);
        margin-bottom  : utils.fes(.31);

        & > .button {

            position : relative;

            @include utils.hover {

                & > .background {
                    opacity   : 1;
                    transform : translateY(-50%) translateX(-50%) scale(1);
                }

                & > svg-icon {
                    color : var(--icon-hover-color);
                }
            }

            & > .background {

                position                    : absolute;

                left                        : 50%;
                top                         : 50%;

                width                       : utils.fes(2.5);
                height                      : utils.fes(2.5);

                cursor                      : pointer;

                border-radius               : utils.fes(2.5);

                opacity                     : 0;
                transform                   : translateY(-50%) translateX(-50%) scale(0.75);

                background-color            : var(--background-color);

                transition                  : opacity .25s ease, transform .25s ease;

                -webkit-tap-highlight-color : transparent;

                &:focus {
                    outline : none;
                }
            }

            & > svg-icon {

                position       : relative;

                width          : utils.fes(1);
                height         : utils.fes(1);

                display        : grid;
                place-items    : center;

                color          : var(--icon-idle-color, theme.hex('icon-idle'));

                pointer-events : none;

                transition     : color .25s ease;

                & > svg {
                    width  : utils.fes(1);
                    height : utils.fes(1);
                }
            }
        }
    }

    & img.avatar {

        position      : relative;

        width         : utils.fes(4);
        height        : utils.fes(4);

        object-fit    : cover;

        border-radius : utils.maxValue();
        overflow      : hidden;

        align-self    : start;

        cursor        : pointer;
    }

    & .content {

        @include theme.commonFont('alternative');
        color       : theme.hex('text');
        line-height : utils.fes(1.15);

        & span {
            user-select : text;
        }
    }

    & .container {

        position       : relative;

        width          : 100%;

        display        : grid;
        grid-auto-flow : row;
        grid-gap       : utils.fes(.65);

        box-sizing     : border-box;
    }

    /* Appearance specific rules */

    & > .spacious {

        $avatarSize           : utils.fes(4);

        width                 : 100%;

        display               : grid;
        grid-template-columns : $avatarSize 1fr;
        grid-gap              : utils.fes(1.5);
        grid-auto-flow        : column;

        & > .container {

            grid-gap         : utils.fes(1);

            padding          : utils.fes(1.5);

            border           : utils.fes(.06) solid theme.hex('border');
            border-radius    : utils.fes(1.25);

            background-color : theme.hex('background');

            box-shadow       : 0 0 utils.fes(1.25) rgba(black, 0.10);
        }

        & .buttons {

            grid-gap : utils.fes(.31);
            margin   : 0;

            & .button > svg-icon {
                width  : utils.fes(2.5);
                height : utils.fes(2.5);
            }
        }
    }

    & > .wrapped {

        width                 : 100%;
        height                : fit-content;

        display               : grid;
        grid-template-columns : utils.fes(2.8 + .3) 1fr;
        grid-auto-flow        : row;
        grid-column-gap       : utils.fes(1.25);

        padding               : utils.fes(1) utils.fes(1.25) utils.fes(1) utils.fes(1);
        box-sizing            : border-box;

        border                : utils.fes(.06) solid theme.hex('border');
        border-radius         : utils.fes(1.25);

        background-color      : theme.hex('background');

        box-shadow            : 0 0 utils.fes(1.25) rgba(black, 0.10);

        & > img.avatar {

            grid-row    : 1;
            grid-column : 1;

            width       : utils.fes(2.8);
            height      : utils.fes(2.8);

            box-sizing  : content-box;
            border      : utils.fes(.25) solid theme.hex('background');
            box-shadow  : 0 0 0 utils.fes(.06) theme.hex('border');
        }

        & .container {

            margin-top  : utils.fes(.45);

            grid-column : 2;

            & .header {
                grid-row : 1;
            }

            & .content {
                grid-row : 2;
            }
        }
    }

    & > .unwrapped {

        position        : relative;

        width           : fit-content;

        display         : grid;
        grid-auto-flow  : column;
        grid-column-gap : utils.fes(1);

        & > .avatar {
            width  : utils.fes(3.45);
            height : utils.fes(3.45);
        }

        & > .container {
            min-height : utils.fes(3.45);
        }
    }
}
